(()=>{var t={n:o=>{var i=o&&o.__esModule?()=>o.default:()=>o;return t.d(i,{a:i}),i},d:(o,i)=>{for(var s in i)t.o(i,s)&&!t.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:i[s]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o)};(()=>{"use strict";const o=flarum.core.compat["forum/app"];var i=t.n(o);const s=flarum.core.compat["common/extend"],e=flarum.core.compat["forum/components/PostStream"];var n=t.n(e);function r(t,o){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},r(t,o)}const a=flarum.core.compat["common/Component"];var c=t.n(a);const u=flarum.core.compat["forum/components/DiscussionListItem"];var l=t.n(u);const d=flarum.core.compat["common/components/LoadingIndicator"];var f=t.n(d),p=function(t){var o,s;function e(){for(var o,i=arguments.length,s=new Array(i),e=0;e<i;e++)s[e]=arguments[e];return(o=t.call.apply(t,[this].concat(s))||this).loading=!1,o.discussions=[],o.limit=0,o.blockName="",o.filterBy="",o.isRelated=!1,o}s=t,(o=e).prototype=Object.create(s.prototype),o.prototype.constructor=o,r(o,s);var n=e.prototype;return n.oninit=function(o){t.prototype.oninit.call(this,o),this.loading=!0,this.discussions=[],this.limit=i().forum.attribute("datlechin-more-discussions.discussionLimit")||5,this.filterBy=i().forum.attribute("datlechin-more-discussions.filterBy"),this.blockName=i().forum.attribute("datlechin-more-discussions.blockName")||i().translator.trans("datlechin-more-discussions.forum.block_default_name"),this.isRelated=i().forum.attribute("datlechin-more-discussions.isRelated"),this.load()},n.view=function(t){var o=this.discussions;return m("[",null,m("div",{className:"DiscussionList"},m("h2",{className:"MoreDiscussions-title"},m.trust(this.blockName)),m("ul",{role:"feed","aria-busy":this.loading,className:"DiscussionList-discussions"},this.loading?m(f(),null):o.map((function(t){return m("li",{key:t.id(),"data-id":t.id(),role:"article","aria-setsize":"-1"},m(l(),{discussion:t,params:{}}))})))))},n.load=function(){var t=this;i().store.find("discussions",{page:{limit:this.limit},sort:this.filterBy,filter:{q:this.isRelated?i().current.data.discussion.title():null}}).then((function(o){t.discussions=o,t.loading=!1,m.redraw()}))},e}(c());i().initializers.add("datlechin/flarum-more-discussions",(function(){(0,s.extend)(n().prototype,"oncreate",(function(){var t=document.querySelector(".PostStream");if(t){var o=document.createElement("div");o.classList.add("MoreDiscussions"),m.mount(function(t,o){if(o.parentNode)return o.parentNode.insertBefore(t,o.nextSibling)}(o,t),p)}}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map